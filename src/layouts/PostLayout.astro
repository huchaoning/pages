---
import MainLayout from "./MainLayout.astro";
const { frontmatter } = Astro.props;

export const titleStyle =
  "text-main text-4xl md:text-5xl font-extrabold tracking-tight leading-tight pb-0";

export const decorationLine =
  "bg-linear-to-r from-main to-transparent mt-6 rounded-full opacity-50 h-1 w-20";

const rawDate = frontmatter.released;
let formattedDate = null;

if (rawDate) {
  const dateObj = rawDate instanceof Date ? rawDate : new Date(rawDate);
  if (!isNaN(dateObj.getTime())) {
    formattedDate = dateObj.toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric",
    });
  }
}
---

<MainLayout title={frontmatter.title}>
  <article
    class="max-w-4xl mx-auto pt-32 pb-20 px-6 font-sans text-base antialiased"
  >
    <header class="mb-12">
      <h1 class={titleStyle}>{frontmatter.title}</h1>
      <div class={decorationLine}></div>
      {
        frontmatter.abstract && (
          <div class="mx-8 mt-8 text-sec text-sm leading-relaxed italic">
            {frontmatter.abstract}
          </div>
        )
      }
    </header>

    <div
      class="prose text-main prose-lg max-w-none
      prose-headings:font-bold prose-headings:tracking-tight
      prose-blockquote:border-l-quat prose-blockquote:italic prose-blockquote:text-sec
      prose-strong:text-main prose-li:marker:text-main
      prose-img:rounded-md prose-img:mx-auto prose-img:block prose-img:w-full prose-img:h-auto
      prose-pre:rounded-md prose-pre:overflow-hidden"
    >
      <slot />
    </div>

    {
      formattedDate && (
        <footer
          class="mt-20 pt-8 border-t border-quat/50 flex items-center text-quat font-blod text-[10px] select-none"
        >
          <span>Released: {formattedDate}</span>
        </footer>
      )
    }
  </article>
</MainLayout>

<style is:global>
  @reference "../styles/global.css";

  .prose :where(.MathJax[display="true"]) {
    @apply block overflow-x-auto overflow-y-hidden;
  }

  .MathJax svg {
    @apply inline-block align-middle;
    shape-rendering: geometricPrecision;
    max-width: none;
  }
</style>
