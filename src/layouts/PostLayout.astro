---
import MainLayout, { slateLinear } from "./MainLayout.astro";
const { frontmatter } = Astro.props;

export const titleStyle = `text-4xl md:text-5xl font-extrabold tracking-tight leading-tight pb-0 ${slateLinear}`;
export const decorationLine =
  "h-1 w-20 bg-linear-to-r from-slate-900 to-transparent mt-6 rounded-full opacity-20";

const rawDate = frontmatter.released;
let formattedDate = null;

if (rawDate) {
  const dateObj = rawDate instanceof Date ? rawDate : new Date(rawDate);
  if (!isNaN(dateObj.getTime())) {
    formattedDate = dateObj.toLocaleDateString("en-US", {
      year: "numeric",
      month: "short",
      day: "numeric",
    });
  }
}
---

<MainLayout title={frontmatter.title}>
  <article
    class="max-w-4xl mx-auto pt-32 pb-20 px-6 antialiased font-sans text-justify [hyphens:auto] [text-justify:inter-word]"
  >
    <header class="mb-12">
      <h1 class={titleStyle}>
        {frontmatter.title}
      </h1>

      <div class={decorationLine}></div>

      {
        frontmatter.abstract && (
          <div class="mr-8 ml-8 mt-8 text-slate-600 text-sm md:text-base leading-relaxed italic">
            {frontmatter.abstract}
          </div>
        )
      }
    </header>

    <div
      class="prose text-black prose-lg max-w-none
      prose-headings:font-bold prose-headings:tracking-tight
      prose-blockquote:border-l-slate-200 prose-blockquote:italic prose-blockquote:text-slate-600
      prose-strong:text-slate-900
      prose-li:marker:text-slate-300"
    >
      <slot />
    </div>

    {
      formattedDate && (
        <footer class="mt-20 pt-8 border-t border-slate-100 flex items-center text-xs text-slate-400">
          <span>Released: {formattedDate}</span>
        </footer>
      )
    }
  </article>
</MainLayout>

<style is:global>
  @reference "../styles/global.css";

  .prose pre,
  .prose img {
    @apply rounded-md overflow-hidden mx-auto block w-full h-auto;
  }

  .prose :where(.MathJax[display="true"]) {
    display: block;
    overflow: auto hidden;
  }

  .MathJax svg {
    shape-rendering: geometricPrecision;
    max-width: none;
    display: inline-block;
    vertical-align: middle;
  }
</style>
